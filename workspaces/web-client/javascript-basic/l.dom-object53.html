<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DOM</title>
    <style>
        table { width: 808px; margin: 0 auto; } /* margin: 0 auto --> 가운데 정렬 */
        td { height: 100px; text-align: center; border: solid 2px; }
        div { width: 800px; height: 300px; margin: 0 auto; border: solid 2px; }
    </style>
</head>
<body>
    <table>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td id="random"></td>
        </tr>        
    </table>
    <div id="canvas">

    </div>
    
    <script>
        // 1. td 요소 찾기 + 변수에 저장 + 이벤트 처리기 연결 ( 일괄 처리, 이벤트 처리 함수 공유 )
        function tdClickHandler(event) { // event : 현재 발생한 이벤트 관련 정보를 담고 있는 객체
            const td = event.target; // event.target : 현재 이벤트가 발생한 객체
            // alert(td.id + " clicked !!!");
            const div = document.querySelector("#canvas");

            // 현재 클릭된 td의 배경색 읽기
            if (td.id == "random") {
                const r = Math.floor(Math.random() * 256);
                const g = Math.floor(Math.random() * 256);
                const b = Math.floor(Math.random() * 256);
                div.style.backgroundColor = 'rgb(' + r + ',' + g + ',' + b + ')'; // rgb(r, g, b)
            } else {
                const bgColor = td.style.backgroundColor; // backgorund-color는 backgroundColor로 변경해서 사용ㄴ
                // div의 배경색 변경
                div.style.backgroundColor = bgColor;
            }
        }
        const tds = document.querySelectorAll('td'); // 해당하는 요소 모두 선택 -> 배열로 반환
        const colors = ['red', 'orangered', 'yellow', 'green', 'blue', 'navy', 'purple'];
        for (let i = 0; i < tds.length; i++) {
            tds[i].onclick = tdClickHandler;
            tds[i].style.backgroundColor = colors[i]; // <td style='background-color:red'
        }
        
        
    </script>
</body>
</html>